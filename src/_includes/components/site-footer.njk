{% set localeParentKey = '/' + locale + '/' %}
{% set primaryNav = collections.primary | eleventyNavigation(localeParentKey) %}
{% set supportNav = collections.support | eleventyNavigation(localeParentKey) %}

{# TEMP #}
<style>
  [aria-label="site"] > ul {
    display: grid;
    grid-gap: 1rem;
    grid-template-columns: repeat(auto-fit, minmax(8rem, 1fr));
  }
  [aria-label="site"] ul {
    list-style: none;
    margin: 0;
    padding: 0;
  }
  [aria-label="site"] li {
    margin-top: 0.5em;
  }
  [aria-label="site"] > ul > li > a {
    font-weight: bold;
  }
  [aria-label="site"] [aria-current="page"],
  [aria-label="support"] [aria-current="page"] {
    background-color: #ddd;
  }
</style>

<footer>
  <div class="wrapper">
    {# TEMP site tree so we can move around the site #}
    {# Let's just list two levels manually, as we don't want to recurse through all levels #}
    <nav aria-label="site">
      <ul>
        {%- for item in primaryNav %}
          <li>
            <a href="{{ item.url | url }}" {% if item.url == page.url %} aria-current="page"{% endif %}>{{ item.title }}</a>
            {%- if item.children %}
              <ul>
                {%- for subitem in item.children %}
                  <li>
                    <a href="{{ subitem.url | url }}" {% if page.url | startsWith(subitem.url) %} aria-current="page"{% endif %}>{{ subitem.title }}</a>
                  </li>
                {%- endfor %}
              </ul>
            {%- endif %}
          </li>
        {%- endfor %}
      </ul>
    </nav>

    <hr/>

    <nav aria-label="support">
      <ul>
        {%- for item in supportNav %}
          <li>
            <a href="{{ item.url | url }}" {% if item.url == page.url %} aria-current="page"{% endif %}>{{ item.title }}</a>
          </li>
        {%- endfor %}
      </ul>
    </nav>

    <p>&copy; {{ page.date.getFullYear() }} All rights reserved.</p>
  </div>
</footer>